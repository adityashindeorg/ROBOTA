<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENTRY S-1 // CLASSIFIED TERMINAL</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&family=JetBrains+Mono:wght@100;400;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
            }
        }
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mil-gold': '#D4C598',
                        'mil-black': '#050505',
                        'mil-green': '#0f3',
                        'mil-red': '#ff3333',
                        'mil-panel': '#0a0b0c',
                        'mil-dim': '#3a3b3c'
                    },
                    fontFamily: {
                        'display': ['"Chakra Petch"', 'sans-serif'],
                        'mono': ['"JetBrains Mono"', 'monospace'],
                    },
                    cursor: { 'none': 'none' },
                    animation: {
                        'scan': 'scan 4s linear infinite',
                        'flash': 'flash 0.5s infinite'
                    },
                    keyframes: {
                        scan: { '0%': { top: '0%' }, '100%': { top: '100%' } },
                        flash: { '0%, 100%': { opacity: 1 }, '50%': { opacity: 0 } }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050505;
            color: #D4C598;
            overflow-x: hidden;
            margin: 0;
            cursor: none;
        }

        /* 3D Layer */
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 0; outline: none; transition: all 0.5s ease;
        }
        
        /* Alert Mode State */
        body.alert-mode #canvas-container {
            filter: sepia(1) hue-rotate(-50deg) saturate(5) contrast(2);
        }
        body.alert-mode .glass-card {
            border-color: #ff3333;
            box-shadow: 0 0 20px rgba(255, 51, 51, 0.2);
        }

        /* HUD Overlay Graphics */
        .hud-corner {
            position: fixed; width: 40px; height: 40px;
            border: 2px solid #D4C598; z-index: 50; pointer-events: none;
            transition: all 0.3s;
        }
        .hud-tl { top: 20px; left: 20px; border-right: 0; border-bottom: 0; }
        .hud-tr { top: 20px; right: 20px; border-left: 0; border-bottom: 0; }
        .hud-bl { bottom: 20px; left: 20px; border-right: 0; border-top: 0; }
        .hud-br { bottom: 20px; right: 20px; border-left: 0; border-top: 0; }

        /* Scanlines */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(0, 0, 0, 0.3) 1px, rgba(0, 0, 0, 0.3) 2px);
            pointer-events: none; z-index: 35; opacity: 0.5;
        }

        /* Tactical Cursor */
        #cursor {
            position: fixed; top: 0; left: 0; width: 30px; height: 30px;
            border: 1px solid #D4C598; 
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: difference;
            display: flex; justify-content: center; align-items: center;
        }
        #cursor::before, #cursor::after {
            content: ''; position: absolute; background: #D4C598;
        }
        #cursor::before { width: 100%; height: 1px; }
        #cursor::after { width: 1px; height: 100%; }
        
        body.alert-mode #cursor { border-color: #ff3333; }
        body.alert-mode #cursor::before, body.alert-mode #cursor::after { background: #ff3333; }

        /* Glass UI */
        .glass-card {
            background: rgba(5, 5, 5, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 197, 152, 0.2);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .glass-card:hover {
            border-color: #D4C598;
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 0 30px rgba(212, 197, 152, 0.1);
        }

        /* Modal System */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); backdrop-filter: blur(15px);
            z-index: 9000; display: none; opacity: 0;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: #050505; border: 1px solid #D4C598;
            width: 95%; max-width: 800px; padding: 0;
            position: relative;
            box-shadow: 0 0 100px rgba(212, 197, 152, 0.1);
        }
        
        /* Loading Bar */
        .loading-strip {
            background: repeating-linear-gradient(45deg, #D4C598, #D4C598 10px, #000 10px, #000 20px);
            animation: slide 20s linear infinite;
        }
        @keyframes slide { from { background-position: 0 0; } to { background-position: 500px 0; } }

        /* Button Hover Glitch */
        .glitch-btn { position: relative; overflow: hidden; }
        .glitch-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 197, 152, 0.4), transparent);
            transition: 0.5s;
        }
        .glitch-btn:hover::before { left: 100%; }

        /* Loader */
        #loader {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: #050505; z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column;
        }
    </style>
</head>
<body class="font-display selection:bg-mil-gold selection:text-black">

    <div id="cursor"></div>
    <div class="hud-corner hud-tl"></div>
    <div class="hud-corner hud-tr"></div>
    <div class="hud-corner hud-bl"></div>
    <div class="hud-corner hud-br"></div>
    <div class="scanlines"></div>
    
    <div class="fixed top-1/2 left-6 -translate-y-1/2 z-40 hidden lg:flex flex-col gap-4 text-[10px] font-mono text-mil-dim pointer-events-none">
        <div class="border-l border-mil-dim pl-2">Y: -0.60</div>
        <div class="border-l border-mil-dim pl-2">Z: 3.20</div>
        <div class="border-l border-mil-dim pl-2">FOV: 45</div>
    </div>

    <div id="loader">
        <div class="font-mono text-xs text-mil-gold mb-2">ESTABLISHING SECURE UPLINK...</div>
        <div class="w-64 h-2 border border-mil-gold p-0.5">
            <div id="progress-bar" class="h-full bg-mil-gold w-0"></div>
        </div>
        <div id="loading-text" class="mt-4 font-mono text-[10px] text-mil-dim animate-pulse">DECRYPTING ASSETS</div>
    </div>

    <div id="universal-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center p-4 border-b border-mil-gold bg-mil-gold/10">
                <div class="text-xs font-mono text-mil-gold flex items-center gap-2">
                    <i class="fas fa-lock"></i> TOP SECRET // EYES ONLY
                </div>
                <button class="text-mil-dim hover:text-white transition" onclick="closeModal()"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div id="modal-body" class="p-8 min-h-[300px]"></div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <nav class="fixed top-0 w-full h-20 z-40 flex justify-between items-center px-6 md:px-12 border-b border-mil-gold/20 bg-black/90 backdrop-blur-xl">
        <div class="font-bold text-2xl tracking-widest uppercase flex items-center gap-2 text-mil-gold">
            <i class="fas fa-shield-alt"></i> SAOGZAA
        </div>
        <div class="hidden md:flex gap-12 text-xs font-mono uppercase tracking-widest interactive items-center text-mil-dim">
            <button onclick="openModal('intel')" class="hover:text-mil-gold transition-colors scramble-text" data-text="INTELLIGENCE">INTELLIGENCE</button>
            <button onclick="openModal('armory')" class="hover:text-mil-gold transition-colors scramble-text" data-text="ARMORY">ARMORY</button>
            <button onclick="openModal('network')" class="hover:text-mil-gold transition-colors scramble-text" data-text="NETWORK">NETWORK</button>
            <a href="#deploy" class="bg-mil-gold text-black font-bold px-8 py-2 hover:bg-white transition glitch-btn">
                DEPLOY UNIT
            </a>
        </div>
    </nav>

    <section class="relative w-full h-screen content-section flex flex-col justify-center px-6 md:px-12 pointer-events-none">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full text-center opacity-10 select-none">
            <h1 class="text-[18vw] leading-none font-bold text-mil-gold uppercase opacity-20">SENTRY</h1>
        </div>

        <div class="w-full max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-end h-full pb-32">
            <div class="max-w-xl interactive pointer-events-auto hero-anim">
                <div class="flex items-center gap-3 mb-6">
                    <span class="px-2 py-1 bg-mil-gold/10 border border-mil-gold text-mil-gold text-[10px] font-bold tracking-widest animate-pulse">SYSTEM ACTIVE</span>
                    <span class="text-mil-dim text-[10px] font-mono">Sector 7 // Clear</span>
                </div>
                <h2 class="text-7xl font-bold uppercase leading-[0.9] mb-8 text-white scramble-header" data-text="AUTONOMOUS DEFENSE">
                    AUTONOMOUS <br> <span class="text-mil-gold">DEFENSE</span>
                </h2>
                <p class="font-mono text-sm text-gray-400 mb-8 leading-relaxed glass-card p-6 border-l-2 border-mil-gold">
                    The Sentry S-1 is a military-grade asset declassified for high-value residential protection. 
                    It does not sleep. It does not hesitate. It secures your perimeter with absolute prejudice against unauthorized entry.
                </p>
                <div class="flex gap-4">
                     <button id="alert-btn" class="bg-transparent border border-mil-red text-mil-red px-8 py-4 font-bold uppercase tracking-wider hover:bg-mil-red hover:text-black transition flex items-center gap-3 glitch-btn">
                        <i class="fas fa-exclamation-triangle"></i> TEST THREAT
                    </button>
                    <button id="scan-btn" class="bg-mil-gold/10 text-mil-gold border border-mil-gold/50 px-8 py-4 font-bold hover:bg-mil-gold hover:text-black transition glitch-btn">
                        RUN DIAGNOSTICS
                    </button>
                </div>
            </div>

            <div class="hidden md:flex flex-col items-end gap-4 interactive hero-anim">
                <div class="glass-card p-6 w-96 border-t-2 border-mil-gold">
                    <div class="flex justify-between items-center mb-4 border-b border-mil-dim pb-2">
                        <span class="text-xs font-mono text-gray-500">LIVE FEED // CAM_01</span>
                        <span class="text-xs font-bold text-mil-green animate-pulse">● RECORDING</span>
                    </div>
                    
                    <div class="h-32 overflow-hidden relative mb-4 bg-black p-3 border border-mil-dim/30 font-mono text-[10px] leading-relaxed text-gray-400">
                        <div id="console-output">
                            > SYS_BOOT_SEQ_INIT...<br>
                            > LOAD_MODULE: WEAPON_INHIBIT [OK]<br>
                            > LOAD_MODULE: FACE_ID [OK]<br>
                            > CONNECTING TO STARLINK... [OK]<br>
                        </div>
                    </div>

                    <div class="flex justify-between text-[10px] font-mono text-mil-gold">
                        <span>BATTERY: 99%</span>
                        <span>TEMP: 34°C</span>
                        <span>AMMO: N/A</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="w-full bg-mil-gold text-black py-2 overflow-hidden content-section border-y border-white/20 relative z-20">
        <div class="whitespace-nowrap font-mono text-xs font-bold tracking-widest animate-marquee">
            // UNAUTHORIZED ACCESS WILL TRIGGER ACTIVE DETERRENCE // LETHAL VOLTAGE INTERNALS // DO NOT OBSTRUCT LIDAR // BIOMETRIC DATA ENCRYPTED // 
            // UNAUTHORIZED ACCESS WILL TRIGGER ACTIVE DETERRENCE // LETHAL VOLTAGE INTERNALS // DO NOT OBSTRUCT LIDAR // BIOMETRIC DATA ENCRYPTED // 
        </div>
    </div>

    <section class="w-full py-32 relative z-10 bg-black/90 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-6 md:px-12">
            <div class="flex flex-col md:flex-row justify-between items-end mb-20 border-b border-mil-dim pb-6">
                <div>
                    <h3 class="text-mil-gold font-mono text-xs mb-2">01 // CAPABILITIES</h3>
                    <h2 class="text-4xl font-bold uppercase text-white">Tactical <span class="text-mil-gold">Superiority</span></h2>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="glass-card p-10 group cursor-none interactive" onclick="openModal('biometrics')">
                    <div class="flex justify-between items-start mb-8">
                        <i class="fas fa-fingerprint text-4xl text-mil-dim group-hover:text-mil-gold transition duration-500"></i>
                        <i class="fas fa-plus text-xs text-mil-dim"></i>
                    </div>
                    <h3 class="text-2xl font-bold uppercase mb-4 text-white group-hover:text-mil-gold transition">Biometric Lock</h3>
                    <p class="text-sm font-mono text-gray-400 leading-relaxed mb-6">
                        The S-1 scans 120 facial points per frame. It creates a cryptographic hash of authorized residents. Strangers trigger a silent alarm instantly.
                    </p>
                    <div class="text-[10px] text-mil-gold font-mono border-b border-mil-gold inline-block pb-1">ACCESS DATA ></div>
                </div>

                <div class="glass-card p-10 group cursor-none interactive" onclick="openModal('chassis')">
                    <div class="flex justify-between items-start mb-8">
                        <i class="fas fa-layer-group text-4xl text-mil-dim group-hover:text-mil-gold transition duration-500"></i>
                        <i class="fas fa-plus text-xs text-mil-dim"></i>
                    </div>
                    <h3 class="text-2xl font-bold uppercase mb-4 text-white group-hover:text-mil-gold transition">Titanium Hull</h3>
                    <p class="text-sm font-mono text-gray-400 leading-relaxed mb-6">
                        Grade 5 Titanium Alloy chassis. Rated to withstand blunt force impact, fire, and extreme weather. It is an immovable object.
                    </p>
                    <div class="text-[10px] text-mil-gold font-mono border-b border-mil-gold inline-block pb-1">VIEW SCHEMATICS ></div>
                </div>

                <div class="glass-card p-10 group cursor-none interactive" onclick="openModal('ai')">
                    <div class="flex justify-between items-start mb-8">
                        <i class="fas fa-brain text-4xl text-mil-dim group-hover:text-mil-gold transition duration-500"></i>
                        <i class="fas fa-plus text-xs text-mil-dim"></i>
                    </div>
                    <h3 class="text-2xl font-bold uppercase mb-4 text-white group-hover:text-mil-gold transition">Neural Core</h3>
                    <p class="text-sm font-mono text-gray-400 leading-relaxed mb-6">
                        Processes threat assessment locally. No cloud latency. It distinguishes between a delivery driver and a prowler in 0.02 seconds.
                    </p>
                    <div class="text-[10px] text-mil-gold font-mono border-b border-mil-gold inline-block pb-1">READ LOGS ></div>
                </div>
            </div>
        </div>
    </section>

    <section class="w-full py-32 relative z-10 bg-mil-panel border-t border-mil-dim/30">
        <div class="absolute top-0 right-0 w-1/2 h-full bg-grid-pattern opacity-5"></div>
        <div class="max-w-7xl mx-auto px-6 md:px-12 relative">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-24">
                
                <div>
                    <h3 class="text-mil-gold font-mono text-xs mb-2">02 // HARDWARE MANIFEST</h3>
                    <h2 class="text-4xl font-bold uppercase text-white mb-10">Specifications</h2>
                    
                    <div class="space-y-1">
                        <div class="flex justify-between items-center p-4 bg-black/40 border-l-2 border-mil-dim hover:border-mil-gold hover:bg-black/60 transition interactive cursor-none">
                            <span class="font-mono text-xs text-gray-400">POWER UNIT</span>
                            <span class="font-bold text-white text-sm">Solid State Fusion Cell (48h)</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-black/40 border-l-2 border-mil-dim hover:border-mil-gold hover:bg-black/60 transition interactive cursor-none">
                            <span class="font-mono text-xs text-gray-400">OPTICS ARRAY</span>
                            <span class="font-bold text-white text-sm">LiDAR / Thermal / 8K Optical</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-black/40 border-l-2 border-mil-dim hover:border-mil-gold hover:bg-black/60 transition interactive cursor-none">
                            <span class="font-mono text-xs text-gray-400">MOBILITY</span>
                            <span class="font-bold text-white text-sm">Omni-Directional / 35km/h</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-black/40 border-l-2 border-mil-dim hover:border-mil-gold hover:bg-black/60 transition interactive cursor-none">
                            <span class="font-mono text-xs text-gray-400">ARMOR CLASS</span>
                            <span class="font-bold text-white text-sm">Level III Ballistic</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-black/40 border-l-2 border-mil-dim hover:border-mil-gold hover:bg-black/60 transition interactive cursor-none">
                            <span class="font-mono text-xs text-gray-400">AUDIO OUTPUT</span>
                            <span class="font-bold text-white text-sm">120dB Directional Siren</span>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col justify-center">
                    <div class="glass-card p-8 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-2 text-mil-gold text-xs font-mono border-b border-l border-mil-gold">SECURE</div>
                        <h4 class="text-white font-bold text-lg mb-4 uppercase">Force Escalation Matrix</h4>
                        <div class="space-y-6 relative z-10">
                            <div class="flex items-center gap-4">
                                <div class="w-8 h-8 rounded-full bg-green-900 flex items-center justify-center text-green-400 text-xs font-bold">1</div>
                                <div class="text-xs text-gray-400 font-mono">VERBAL WARNING / SPOTLIGHT</div>
                            </div>
                            <div class="w-0.5 h-4 bg-gray-800 ml-4"></div>
                            <div class="flex items-center gap-4">
                                <div class="w-8 h-8 rounded-full bg-yellow-900 flex items-center justify-center text-yellow-400 text-xs font-bold">2</div>
                                <div class="text-xs text-gray-400 font-mono">STROBE BLINDING / SIREN</div>
                            </div>
                            <div class="w-0.5 h-4 bg-gray-800 ml-4"></div>
                            <div class="flex items-center gap-4">
                                <div class="w-8 h-8 rounded-full bg-red-900 flex items-center justify-center text-red-400 text-xs font-bold">3</div>
                                <div class="text-xs text-gray-400 font-mono">LAW ENFORCEMENT UPLINK</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="deploy" class="w-full py-32 bg-black relative z-10 border-t border-mil-gold/20">
        <div class="max-w-7xl mx-auto px-6 md:px-12">
            <div class="text-center mb-20">
                <h2 class="text-4xl font-bold uppercase text-white mb-4">Deployment <span class="text-mil-gold">Packages</span></h2>
                <p class="text-gray-500 font-mono text-sm">Financing available via Saogzaa Defense Financial.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="glass-card p-8 flex flex-col interactive">
                    <div class="text-xs font-bold text-gray-500 tracking-widest mb-4">CIVILIAN</div>
                    <div class="text-4xl font-bold text-white mb-2">$4,999</div>
                    <div class="h-px w-full bg-mil-dim/30 my-6"></div>
                    <ul class="space-y-4 text-sm font-mono text-gray-400 mb-8 flex-grow">
                        <li><span class="text-mil-gold">></span> 8hr Patrol Battery</li>
                        <li><span class="text-mil-gold">></span> 1080p Recording</li>
                        <li><span class="text-mil-gold">></span> Standard Alloy</li>
                    </ul>
                    <button onclick="openModal('order')" class="w-full border border-mil-dim text-white py-4 hover:bg-mil-dim transition uppercase text-xs font-bold tracking-widest">Configure</button>
                </div>

                <div class="glass-card p-8 flex flex-col relative transform md:-translate-y-6 border-mil-gold interactive bg-mil-gold/5">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-mil-gold text-black text-[10px] font-bold px-4 py-1 tracking-widest uppercase">Recommended</div>
                    <div class="text-xs font-bold text-mil-gold tracking-widest mb-4 mt-2">ESTATE CLASS</div>
                    <div class="text-4xl font-bold text-white mb-2">$8,499</div>
                    <div class="h-px w-full bg-mil-gold/30 my-6"></div>
                    <ul class="space-y-4 text-sm font-mono text-gray-300 mb-8 flex-grow">
                        <li><span class="text-mil-gold">></span> 24hr Patrol Battery</li>
                        <li><span class="text-mil-gold">></span> 4K HDR Vision</li>
                        <li><span class="text-mil-gold">></span> Carbon Fiber Shell</li>
                        <li><span class="text-mil-gold">></span> Advanced FaceID</li>
                    </ul>
                    <button onclick="openModal('order')" class="w-full bg-mil-gold text-black py-4 hover:bg-white transition uppercase text-xs font-bold tracking-widest">Deploy Now</button>
                </div>

                <div class="glass-card p-8 flex flex-col interactive border-mil-red/50">
                    <div class="text-xs font-bold text-mil-red tracking-widest mb-4">BUNKER</div>
                    <div class="text-4xl font-bold text-white mb-2">$14,999</div>
                    <div class="h-px w-full bg-mil-red/30 my-6"></div>
                    <ul class="space-y-4 text-sm font-mono text-gray-400 mb-8 flex-grow">
                        <li><span class="text-mil-red">></span> 48hr Fusion Cell</li>
                        <li><span class="text-mil-red">></span> Thermal / Night Vision</li>
                        <li><span class="text-mil-red">></span> Ballistic Armor Lvl 3</li>
                    </ul>
                    <button onclick="openModal('order')" class="w-full border border-mil-red text-mil-red py-4 hover:bg-mil-red hover:text-black transition uppercase text-xs font-bold tracking-widest">Contact Sales</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="w-full py-16 bg-black content-section text-xs font-mono border-t border-mil-dim">
        <div class="max-w-7xl mx-auto px-6 md:px-12 flex flex-col md:flex-row justify-between items-center text-gray-500">
            <div class="flex gap-8">
                <span class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-mil-green animate-pulse"></div> SYSTEM ONLINE</span>
                <span>PING: 1ms</span>
                <span>LOC: US-EAST</span>
            </div>
            <div class="mt-4 md:mt-0">
                &copy; 2077 SAOGZAA INDUSTRIES. MADE ON EARTH.
            </div>
        </div>
    </footer>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        gsap.registerPlugin(ScrollTrigger, TextPlugin);

        // --- SCRAMBLE TEXT EFFECT ---
        document.querySelectorAll('.scramble-text').forEach(el => {
            el.addEventListener('mouseenter', () => {
                gsap.to(el, { duration: 0.5, text: { value: el.dataset.text, delimiter: "" }, ease: "none" });
            });
        });
        
        // --- RED ALERT MODE ---
        const alertBtn = document.getElementById('alert-btn');
        let isAlert = false;
        alertBtn.addEventListener('click', () => {
            isAlert = !isAlert;
            document.body.classList.toggle('alert-mode');
            if(isAlert) {
                alertBtn.innerHTML = '<i class="fas fa-exclamation-circle animate-pulse"></i> LOCKDOWN';
                gsap.to('#canvas-container', { x: 5, duration: 0.1, yoyo: true, repeat: 5 }); // Shake
            } else {
                alertBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> TEST THREAT';
            }
        });

        // --- MODAL SYSTEM (DATA UPLINK) ---
        window.openModal = (type) => {
            const modal = document.getElementById('universal-modal');
            const body = document.getElementById('modal-body');
            
            // 1. Show "Connecting" State
            body.innerHTML = `
                <div class="flex flex-col items-center justify-center h-64 font-mono text-mil-gold">
                    <div class="text-4xl mb-4"><i class="fas fa-satellite-dish animate-pulse"></i></div>
                    <div class="text-sm tracking-widest mb-2">ESTABLISHING UPLINK...</div>
                    <div class="w-64 h-1 bg-mil-dim"><div class="h-full bg-mil-gold loading-strip"></div></div>
                    <div class="text-[10px] text-mil-dim mt-2">DECRYPTING PACKETS // 2048-BIT</div>
                </div>
            `;
            modal.style.display = 'flex';
            gsap.to(modal, { opacity: 1, duration: 0.3 });
            gsap.fromTo('.modal-content', { scale: 0.9, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.3 });

            // 2. Inject Data after simulated delay
            setTimeout(() => {
                let content = "";
                if(type === 'intel' || type === 'biometrics') {
                    content = `
                        <h2 class="text-2xl text-white font-bold mb-6 border-b border-mil-gold pb-2">BIOMETRIC INTEL</h2>
                        <div class="grid grid-cols-2 gap-8 font-mono text-xs text-gray-300">
                            <div>
                                <p class="mb-4">The S-1 uses a proprietary <strong>120-point facial mesh</strong> scanner. It processes gait, thermal signature, and skeletal structure simultaneously.</p>
                                <ul class="space-y-2 text-mil-gold">
                                    <li>> RETINA SCAN: ACTIVE</li>
                                    <li>> VOICE PRINT: LISTENING</li>
                                    <li>> HEART RATE MONITOR: ON</li>
                                </ul>
                            </div>
                            <div class="bg-black p-4 border border-mil-dim">
                                <div class="text-center mb-2">MATCH CONFIDENCE</div>
                                <div class="text-4xl text-white font-bold text-center">99.9%</div>
                            </div>
                        </div>`;
                } else if(type === 'order') {
                    content = `
                        <h2 class="text-2xl text-mil-gold font-bold mb-6 border-b border-mil-dim pb-2">SECURE ORDER TERMINAL</h2>
                        <form class="space-y-4 font-mono text-sm">
                            <input type="text" placeholder="OPERATIVE NAME" class="w-full bg-black border border-mil-dim p-3 text-white outline-none focus:border-mil-gold">
                            <input type="text" placeholder="DEPLOYMENT SECTOR (ADDRESS)" class="w-full bg-black border border-mil-dim p-3 text-white outline-none focus:border-mil-gold">
                            <div class="flex items-center gap-2 text-xs text-mil-green mt-4">
                                <i class="fas fa-lock"></i> CONNECTION ENCRYPTED (AES-256)
                            </div>
                            <button type="button" class="w-full bg-mil-gold text-black font-bold py-4 hover:bg-white transition">TRANSMIT ORDER</button>
                        </form>`;
                } else {
                    content = `<div class="p-8 text-center font-mono text-mil-gold">DATA PACKET RECEIVED.<br>ACCESS GRANTED.</div>`;
                }
                
                gsap.to(body, { opacity: 0, duration: 0.2, onComplete: () => {
                    body.innerHTML = content;
                    gsap.to(body, { opacity: 1, duration: 0.3 });
                }});
            }, 1500);
        };

        window.closeModal = () => {
            gsap.to('#universal-modal', { opacity: 0, duration: 0.3, onComplete: () => {
                document.getElementById('universal-modal').style.display = 'none';
            }});
        };

        // --- 3D SCENE ---
        const container = document.getElementById('canvas-container');
        const loaderScreen = document.getElementById('loader');
        const progressBar = document.getElementById('progress-bar');
        
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.04);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        // LOCKED SETTINGS: Y=1.5, Z=3.2 (Imposing Close-up)
        camera.position.set(0, 1.5, 3.2); 

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2;
        renderer.shadowMap.enabled = true;
        container.appendChild(renderer.domElement);

        // Cinematic Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.1);
        scene.add(ambientLight);
        
        const keyLight = new THREE.DirectionalLight(0xdcc495, 3.0); // Strong Gold Key
        keyLight.position.set(5, 5, 5);
        keyLight.castShadow = true;
        scene.add(keyLight);

        const rimLight = new THREE.SpotLight(0xc2410c, 20); // Strong Orange Rim
        rimLight.position.set(-5, 5, -2);
        rimLight.lookAt(0, 0, 0);
        scene.add(rimLight);

        // Dynamic Flashlight
        const flashLight = new THREE.SpotLight(0xffffff, 5, 20, 0.5, 0.5, 1);
        flashLight.position.set(0, 2, 4);
        scene.add(flashLight);
        scene.add(flashLight.target);

        // --- MODEL LOADING (FAILSAFE) ---
        let robot;
        const loader = new GLTFLoader();

        loader.load('robot.glb', (gltf) => {
            robot = gltf.scene;
            const box = new THREE.Box3().setFromObject(robot);
            const center = box.getCenter(new THREE.Vector3());
            
            robot.position.x -= center.x;
            robot.position.y -= center.y;
            robot.position.z -= center.z;
            
            // LOCKED POSITION: -0.6
            robot.position.y = -0.6; 
            robot.scale.set(1.0, 1.0, 1.0);

            scene.add(robot);

            robot.traverse((child) => {
                if (child.isMesh) {
                    child.castShadow = true;
                    child.receiveShadow = true;
                    if(child.material) {
                        child.material.roughness = 0.4;
                        child.material.metalness = 0.8;
                    }
                }
            });

            // Success - Remove Loader
            gsap.to(loaderScreen, { opacity: 0, duration: 0.8, onComplete: () => loaderScreen.style.display = 'none' });
            gsap.from(".hero-anim", { y: 50, opacity: 0, duration: 1, stagger: 0.2, ease: "power2.out", delay: 0.5 });

        }, (error) => {
            // Failsafe - Remove loader anyway after timeout
            console.warn("Model failed to load (CORS/Path). Site will function without 3D.");
        });

        // FAILSAFE TIMER (3.5s)
        setTimeout(() => {
            if(loaderScreen.style.display !== 'none') {
                gsap.to(loaderScreen, { opacity: 0, duration: 0.8, onComplete: () => loaderScreen.style.display = 'none' });
            }
        }, 3500);

        // --- INTERACTION ---
        let mouse = new THREE.Vector2();
        const cursor = document.getElementById('cursor');
        
        document.addEventListener('mousemove', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // Cursor update
            gsap.to(cursor, { x: event.clientX, y: event.clientY, duration: 0.1 });
            
            // Flashlight tracks mouse
            flashLight.target.position.x = mouse.x * 5;
            flashLight.target.position.y = mouse.y * 5;
        });

        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            
            if (robot) {
                // LOCKED POSITION
                robot.position.y = -0.6;
                
                // CORRECTED LOOK LOGIC
                // Up = Up (-mouse.y * factor)
                // Right = Right (mouse.x * factor)
                
                const targetRotX = -mouse.y * 0.6; 
                const targetRotY = mouse.x * 0.6; 
                
                // Heavy Hydraulic Smoothness (0.04)
                robot.rotation.x += (targetRotX - robot.rotation.x) * 0.04;
                robot.rotation.y += (targetRotY - robot.rotation.y) * 0.04;
                
                // Subtle Camera Breathing
                camera.position.x += (mouse.x * 0.05 - camera.position.x) * 0.01;
            }
            renderer.render(scene, camera);
        }
        animate();

        // --- CONSOLE LOGIC ---
        const termOutput = document.getElementById('console-output');
        const msgs = ["> SCANNING SECTOR 7...", "> THERMAL: STABLE", "> THREATS: 0", "> NETWORK: ENCRYPTED"];
        let msgIndex = 0;
        setInterval(() => {
            if(termOutput) {
                termOutput.innerHTML += "<br>" + msgs[msgIndex];
                termOutput.scrollTop = termOutput.scrollHeight;
                msgIndex = (msgIndex + 1) % msgs.length;
                if(termOutput.innerHTML.length > 200) termOutput.innerHTML = "> SYS_READY..."; 
            }
        }, 2000);

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Scan Marquee CSS
        const style = document.createElement('style');
        style.innerHTML = `@keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } } .animate-marquee { display: inline-block; animation: marquee 30s linear infinite; }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
